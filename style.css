/* ── Reset ──────────────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

/* ── Design tokens ──────────────────────────────────────────── */
:root {
  --bg:         #080b0f;
  --surface:    #0d1117;
  --surface2:   #111820;
  --border:     #1e2a38;
  --border-hi:  #2a3f55;
  --green:      #00e5a0;
  --green-dim:  #005c40;
  --green-glow: rgba(0,229,160,0.12);
  --blue:       #0aafff;
  --blue-dim:   rgba(10,175,255,0.1);
  --red:        #ff4d6a;
  --text:       #c8d8e8;
  --text-dim:   #4a6070;
  --text-mid:   #7a99aa;
  --mono:       'IBM Plex Mono', monospace;
  --sans:       'Syne', sans-serif;
  --radius:     4px;
  --panel-w:    460px;
}

/* ── Base ───────────────────────────────────────────────────── */
html { scroll-behavior: smooth; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--mono);
  font-size: 13px;
  line-height: 1.6;
  min-height: 100vh;
  overflow-x: hidden;
}

/* ── Background ─────────────────────────────────────────────── */
.bg-grid {
  position: fixed; inset: 0; z-index: 0; pointer-events: none;
  background-image:
    linear-gradient(rgba(0,229,160,0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0,229,160,0.03) 1px, transparent 1px);
  background-size: 40px 40px;
}
.bg-glow {
  position: fixed; top: -200px; right: -200px;
  width: 600px; height: 600px; border-radius: 50%;
  background: radial-gradient(circle, rgba(0,229,160,0.06) 0%, transparent 70%);
  pointer-events: none; z-index: 0;
}

/* ── Header ─────────────────────────────────────────────────── */
.header {
  position: sticky; top: 0; z-index: 100;
  background: rgba(8,11,15,0.92);
  backdrop-filter: blur(12px);
  border-bottom: 1px solid var(--border);
}
.header-inner {
  max-width: 1400px; margin: 0 auto;
  padding: 14px 28px;
  display: flex; align-items: center; justify-content: space-between;
}
.logo { display: flex; align-items: center; gap: 12px; }
.logo-icon {
  font-size: 1.6rem; color: var(--green);
  filter: drop-shadow(0 0 8px rgba(0,229,160,0.5));
  animation: pulse-icon 3s ease-in-out infinite;
}
@keyframes pulse-icon {
  0%,100% { filter: drop-shadow(0 0 6px rgba(0,229,160,0.4)); }
  50%      { filter: drop-shadow(0 0 14px rgba(0,229,160,0.7)); }
}
.logo-name {
  font-family: var(--sans);
  font-size: 1.3rem; font-weight: 800;
  color: var(--green); letter-spacing: 0.05em;
  display: block;
}
.logo-sub {
  font-size: 0.65rem; letter-spacing: 0.18em;
  color: var(--text-dim); text-transform: uppercase;
  display: block; margin-top: -2px;
}
.header-status { display: flex; align-items: center; gap: 8px; }
.status-dot {
  width: 8px; height: 8px; border-radius: 50%;
  background: var(--green);
  box-shadow: 0 0 8px rgba(0,229,160,0.6);
  transition: background 0.3s, box-shadow 0.3s;
}
.status-dot.loading { background: var(--blue); box-shadow: 0 0 8px rgba(10,175,255,0.6); animation: blink 0.8s ease infinite; }
.status-dot.error   { background: var(--red);  box-shadow: 0 0 8px rgba(255,77,106,0.6); }
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:0.3} }
.status-label { font-size: 0.7rem; letter-spacing: 0.15em; color: var(--text-mid); text-transform: uppercase; }

/* ── Layout ─────────────────────────────────────────────────── */
.layout {
  max-width: 1400px; margin: 0 auto;
  display: grid;
  grid-template-columns: var(--panel-w) 1fr;
  gap: 0;
  min-height: calc(100vh - 57px);
  position: relative; z-index: 1;
}

/* ── Panels ─────────────────────────────────────────────────── */
.panel {
  padding: 28px 28px 40px;
  overflow-y: auto;
}
.panel-form {
  border-right: 1px solid var(--border);
  background: var(--surface);
}
.panel-output {
  background: var(--bg);
}
.panel-header {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 24px; padding-bottom: 14px;
  border-bottom: 1px solid var(--border);
}
.panel-title {
  font-family: var(--sans);
  font-size: 1rem; font-weight: 700;
  color: var(--text); letter-spacing: 0.05em;
}
.panel-tag {
  font-size: 0.6rem; letter-spacing: 0.2em;
  color: var(--green-dim); background: rgba(0,229,160,0.07);
  border: 1px solid var(--green-dim);
  padding: 2px 8px; border-radius: 2px; text-transform: uppercase;
}

/* ── Fieldsets ──────────────────────────────────────────────── */
.fieldset {
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 16px 16px 14px;
  margin-bottom: 14px;
  transition: border-color 0.2s;
}
.fieldset:focus-within { border-color: var(--border-hi); }
.fieldset-legend {
  font-size: 0.6rem; letter-spacing: 0.22em; text-transform: uppercase;
  color: var(--text-dim); padding: 0 6px;
  font-family: var(--sans); font-weight: 700;
}
.collapsible .fieldset-legend { cursor: pointer; user-select: none; }
.toggle-legend { display: flex; align-items: center; gap: 8px; }
.optional-tag {
  font-size: 0.55rem; letter-spacing: 0.15em;
  color: var(--text-dim); background: var(--surface2);
  border: 1px solid var(--border); padding: 1px 6px; border-radius: 2px;
}
.chevron { margin-left: auto; color: var(--text-dim); transition: transform 0.25s; font-style: normal; }
.chevron.open { transform: rotate(90deg); }
.collapsible-body { overflow: hidden; max-height: 0; transition: max-height 0.3s ease; }
.collapsible-body.open { max-height: 800px; }

/* ── Fields ─────────────────────────────────────────────────── */
.field { display: flex; flex-direction: column; gap: 5px; margin-top: 12px; }
.field:first-child { margin-top: 4px; }
.field-row { display: flex; align-items: flex-start; gap: 10px; margin-top: 4px; }
.field-or {
  font-size: 0.6rem; letter-spacing: 0.15em; color: var(--text-dim);
  padding-top: 28px; flex-shrink: 0;
}
.flex2 { flex: 2; }
.flex1 { flex: 1; }
.label {
  font-size: 0.7rem; letter-spacing: 0.1em; color: var(--text-mid);
  text-transform: uppercase;
}
.required { color: var(--green); }
.field-hint { font-size: 0.62rem; color: var(--text-dim); line-height: 1.4; }
.link { color: var(--green); text-decoration: none; }
.link:hover { text-decoration: underline; }

/* ── Inputs ─────────────────────────────────────────────────── */
.input {
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  color: var(--text);
  font-family: var(--mono);
  font-size: 12.5px;
  padding: 9px 12px;
  outline: none;
  transition: border-color 0.2s, box-shadow 0.2s;
  width: 100%;
  resize: vertical;
}
.input::placeholder { color: var(--text-dim); }
.input:focus {
  border-color: var(--green);
  box-shadow: 0 0 0 3px rgba(0,229,160,0.08);
}
.input-mono { font-family: var(--mono); letter-spacing: 0.08em; }
.textarea { min-height: 70px; }

/* ── Submit row ─────────────────────────────────────────────── */
.submit-row { display: flex; gap: 10px; margin-top: 18px; align-items: center; }
.btn-run {
  flex: 1;
  display: flex; align-items: center; justify-content: center; gap: 8px;
  background: var(--green);
  color: #020f08;
  border: none; border-radius: var(--radius);
  font-family: var(--sans); font-weight: 700;
  font-size: 0.82rem; letter-spacing: 0.08em;
  padding: 12px 20px;
  cursor: pointer;
  transition: filter 0.2s, transform 0.1s;
}
.btn-run:hover { filter: brightness(1.12); }
.btn-run:active { transform: scale(0.98); }
.btn-run:disabled { filter: brightness(0.5); cursor: not-allowed; }
.btn-icon { font-size: 1rem; }
.btn-clear {
  background: transparent;
  border: 1px solid var(--border);
  color: var(--text-dim);
  font-family: var(--mono); font-size: 0.72rem;
  padding: 10px 16px; border-radius: var(--radius);
  cursor: pointer; transition: border-color 0.2s, color 0.2s;
}
.btn-clear:hover { border-color: var(--text-mid); color: var(--text); }

/* ── Output: empty ──────────────────────────────────────────── */
.empty-state {
  display: flex; flex-direction: column; align-items: center;
  justify-content: center; height: 70vh;
  text-align: center; gap: 10px;
}
.empty-icon {
  font-size: 3rem; color: var(--border-hi);
  animation: float 4s ease-in-out infinite;
}
@keyframes float { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-8px)} }
.empty-title { font-family: var(--sans); font-size: 1rem; color: var(--text-mid); font-weight: 700; }
.empty-sub { font-size: 0.75rem; color: var(--text-dim); line-height: 1.6; }
.empty-sub strong { color: var(--text-mid); }
.empty-steps {
  display: flex; flex-direction: column; gap: 5px;
  margin-top: 16px; text-align: left; width: 220px;
}
.step {
  font-size: 0.67rem; color: var(--text-dim); letter-spacing: 0.06em;
  display: flex; align-items: center; gap: 8px;
}
.step span {
  width: 18px; height: 18px; border-radius: 50%;
  border: 1px solid var(--border); display: flex; align-items: center; justify-content: center;
  font-size: 0.55rem; color: var(--green); flex-shrink: 0;
}

/* ── Output: loading ────────────────────────────────────────── */
.loading-state {
  display: flex; flex-direction: column; align-items: center;
  justify-content: center; height: 70vh; gap: 20px;
}
.loader-ring {
  width: 52px; height: 52px; border-radius: 50%;
  border: 2px solid var(--border);
  border-top-color: var(--green);
  animation: spin 0.9s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }
.loading-title { font-family: var(--sans); font-weight: 700; color: var(--text-mid); font-size: 0.9rem; }
.loading-steps { display: flex; flex-direction: column; gap: 6px; }
.lstep {
  font-size: 0.68rem; color: var(--text-dim); letter-spacing: 0.06em;
  display: flex; align-items: center; gap: 8px;
  transition: color 0.3s;
}
.lstep::before {
  content: '○'; color: var(--border-hi); flex-shrink: 0;
  transition: color 0.3s;
}
.lstep.active { color: var(--green); }
.lstep.active::before { content: '●'; color: var(--green); }
.lstep.done { color: var(--text-mid); }
.lstep.done::before { content: '✓'; color: var(--green); }

/* ── Output: result ─────────────────────────────────────────── */
.result-meta {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 12px 16px;
  margin-bottom: 20px;
  display: flex; flex-wrap: wrap; gap: 16px;
}
.meta-item { display: flex; flex-direction: column; gap: 2px; }
.meta-key { font-size: 0.58rem; letter-spacing: 0.2em; color: var(--text-dim); text-transform: uppercase; }
.meta-val { font-size: 0.75rem; color: var(--green); }

.result-body {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px 22px;
  font-size: 13px; line-height: 1.75;
  color: var(--text);
  white-space: pre-wrap;
  word-break: break-word;
  font-family: var(--mono);
  max-height: calc(100vh - 280px);
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: var(--border-hi) transparent;
}

/* Markdown-ish styling for the report */
.result-body h1, .result-body h2 {
  font-family: var(--sans); color: var(--green);
  border-bottom: 1px solid var(--border);
  padding-bottom: 4px; margin: 20px 0 10px;
}
.result-body h3 { font-family: var(--sans); color: var(--blue); margin: 16px 0 6px; }
.result-body strong { color: var(--text); }
.result-body code {
  background: var(--surface2); border: 1px solid var(--border);
  padding: 1px 5px; border-radius: 3px; font-size: 0.88em;
}
.result-body pre {
  background: var(--surface2); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 12px;
  overflow-x: auto; margin: 10px 0;
}
.result-body pre code { background: none; border: none; padding: 0; }

/* ── Output: error ──────────────────────────────────────────── */
.error-state {
  display: flex; flex-direction: column; align-items: center;
  justify-content: center; height: 70vh; gap: 12px; text-align: center;
}
.error-icon {
  width: 48px; height: 48px; border-radius: 50%;
  background: rgba(255,77,106,0.1); border: 1px solid var(--red);
  display: flex; align-items: center; justify-content: center;
  font-size: 1.2rem; color: var(--red);
}
.error-title { font-family: var(--sans); font-size: 0.9rem; font-weight: 700; color: var(--text-mid); }
.error-msg { font-size: 0.72rem; color: var(--text-dim); max-width: 380px; line-height: 1.6; }
.btn-retry {
  background: transparent; border: 1px solid var(--red);
  color: var(--red); font-family: var(--mono); font-size: 0.72rem;
  padding: 8px 20px; border-radius: var(--radius);
  cursor: pointer; transition: background 0.2s;
  letter-spacing: 0.1em;
}
.btn-retry:hover { background: rgba(255,77,106,0.08); }

/* ── Output actions ─────────────────────────────────────────── */
.output-actions { display: flex; gap: 8px; }
.btn-copy, .btn-download {
  background: transparent; border: 1px solid var(--border);
  color: var(--text-dim); font-family: var(--mono);
  font-size: 0.65rem; letter-spacing: 0.12em; text-transform: uppercase;
  padding: 5px 12px; border-radius: var(--radius);
  cursor: pointer; transition: border-color 0.2s, color 0.2s;
}
.btn-copy:hover, .btn-download:hover {
  border-color: var(--green); color: var(--green);
}

/* ── Responsive ─────────────────────────────────────────────── */
@media (max-width: 860px) {
  .layout { grid-template-columns: 1fr; }
  .panel-form { border-right: none; border-bottom: 1px solid var(--border); }
  :root { --panel-w: 100%; }
}
